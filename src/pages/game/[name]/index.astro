---
  import { supabase } from '@lib/database'
	import Layout from '@layouts/layout.astro'
  import Game from '@components/games/Game.svelte'

  const { user } = Astro.locals
  const { name } = Astro.params

  const { data, error } = await supabase.from('games').select('id, name, intro, info, profiles ( id, name )').eq('name', name).single()
  if (error) { console.error('Error loading game data', error.message) }
---

<Layout title={name}>
  <Game {name} {data} {user} client:only />
</Layout>
