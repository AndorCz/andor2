---
import LayoutTirien from '@layouts/layoutTirien.astro'

// Get supabase user auth
const accessToken = Astro.cookies.get('sb-access-token')?.value
const refreshToken = Astro.cookies.get('sb-refresh-token')?.value

// Path based on environment
const path = import.meta.env.DEV ? 'http://localhost:5173' : 'https://tirien.cz'
const params = new URLSearchParams()
if (accessToken && refreshToken) {
  params.set('accessToken', accessToken)
  params.set('refreshToken', refreshToken)
}
const iframeSrc = `${path}${params.size ? `?${params}` : ''}`
---

<LayoutTirien title='Tirien: Hlavní město Andoru' sidePadding={false}>
  <div class='tirien-iframe-container'>
    <iframe 
      src={iframeSrc}
      width='100%' 
      height='600px'
      frameborder='0'
      allow='autoplay; encrypted-media; fullscreen'>
    </iframe>
  </div>
</LayoutTirien>

<style>
  .tirien-iframe-container {
    width: 100%;
    padding-top: 55px;
  }
</style>